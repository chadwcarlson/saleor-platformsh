name: dashboard

type: 'nodejs:14'

variables:
    env:
        NODE_OPTIONS: --max-old-space-size=768
        NO_UPDATE_NOTIFIER: true
        # SHARP_IGNORE_GLOBAL_LIBVIPS: true
        # USE_DEMO_DATA: true

hooks:
    build: |
        set -e 

        # Get Saleor dashboard.
        ./upstreams/dashboard.sh

    # post_deploy: |
    #     # set -e 
    #     npm run build

# relationships:
#     api: "saleor:http"

# The size of the persistent disk of the application (in MB).
disk: 1024

# mounts:
#     build:
#         source: local
#         source_path: build

web:
    locations:
        '/':
            # The public directory of the application relative to its root.
            root: 'build/dashboard'
            index: ['index.html']
            scripts: false
            allow: true
            expires: 1d